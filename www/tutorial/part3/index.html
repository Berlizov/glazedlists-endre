<html>
<head><title>Glazed Lists Tutorial Part 3 - Custom Filtering</title>
<link REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">
</head>
<body>

<h3>Glazed Lists Tutorial</h3>
<h1>Part 3 - Custom Filtering</h1>

<p>Although text filters are fantastic, they don't solve all of our problems. Glazed Lists
makes it easy to create custom filters that work with your data. The right filter
will make your application easier to use and prevent user errors.

<p>For our tutorial, we're going to implement a pair of checkboxes for our 
<code>ProgrammingLanguage</code>. We will allow users to optionally show only programming languages that are
object-oriented or use a virtual machine. First, we'll need to ensure that the filter
data exists in our source object. We'll add a few methods to <code>ProgrammingLanguage</code>
for this.

<p><table cellpadding="5" cellspacing="0" width="100%" border="1" bgcolor="#EEEEEE"><tr><td><pre><code>    public boolean isObjectOriented() {
        return objectOriented;
    }
    
    public boolean isVirtualMachine() {
        return virtualMachine;
    }</code></pre></td></tr></table>
    
<h3>Extending AbstractFilterList</h3>
<p>To create our custom filter we simply extend AbstractFilterList. There is one method
which we need to create, <code>boolean filterMatches(Object element)</code>, to test
if a given object in the set matches the current filter. Another noteworthy method
of <code>AbstractFilterList</code> is <code>handleFilterChanged()</code>, which
should be called whenever the filtering critera changes. In our case, this will be
whenever a user changes the value of a checkbox.

<p><table cellpadding="5" cellspacing="0" width="100%" border="1" bgcolor="#EEEEEE"><tr><td><pre><code>import com.odellengineeringltd.glazedlists.*;
import java.awt.event.*;
import javax.swing.*;

class ProgrammingLanguageFilter <font color="#FF3333">extends AbstractFilterList</font> implements ItemListener {

    JCheckBox objectOrientedCheck;
    JCheckBox virtualMachineCheck;
    
    public ProgrammingLanguageFilter(EventList source) {
        <font color="#FF3333">super(source);</font>

        objectOrientedCheck = new JCheckBox("Object Oriented");
        objectOrientedCheck.addItemListener(this);
        
        virtualMachineCheck = new JCheckBox("Virtual Machine");
        virtualMachineCheck.addItemListener(this);

        <font color="#FF3333">handleFilterChanged();</font>
    }
    
    <font color="#FF3333">public boolean filterMatches(Object element)</font> {
        ProgrammingLanguage language = (ProgrammingLanguage)element;
        
        if(objectOrientedCheck.isSelected() && !language.isObjectOriented()) return false;
        if(virtualMachineCheck.isSelected() && !language.isVirtualMachine()) return false;
        
        return true;
    }
    
    public void itemStateChanged(ItemEvent e) {
        <font color="#FF3333">handleFilterChanged();</font>
    }

    public JCheckBox getObjectOrientedCheckBox() {
        return objectOrientedCheck;
    }

    public JCheckBox getVirtualMachineCheckBox() {
        return virtualMachineCheck;
    }
}</code></pre></td></tr></table>

<p>There are a few important notes when extending <code>AbstractFilterList</code>:
<li><code class="highlighted">super(EventList)</code> is the only way to instantiate the
AbstractFilterList. The parameter is the source list to be filtered.
<li><code class="highlighted">handleFilterChanged()</code> must be called at the end of the constructor.
<li><code class="highlighted">handleFilterChanged()</code> should be called whenever the filter criteria changes.

<p>Finally we must add the filter to our list chain and add the checkboxes to our Frame.

<p><table cellpadding="5" cellspacing="0" width="100%" border="1" bgcolor="#EEEEEE"><tr><td><pre><code>import com.odellengineeringltd.glazedlists.*;
import com.odellengineeringltd.glazedlists.jtable.*;
import javax.swing.*;
import java.awt.*;

public class ProgrammingLanguageBrowser {

    BasicEventList languages;
    CaseInsensitiveFilterList filteredLanguages;
    <font color="#FF3333">ProgrammingLanguageFilter customFilteredLanguages;</font>

    public ProgrammingLanguageBrowser() {
        languages = new BasicEventList();
        languages.add(new ProgrammingLanguage("Java", "1995", "Object-oriented virtual machine language by Sun Microsystems", true, true));
        languages.add(new ProgrammingLanguage("C", "1973", "The UNIX language originally developed for the PDP-11", false, false));
        ...
        languages.add(new ProgrammingLanguage("Visual Basic", "1992", "QuickBasic with a visual UI designer", false, false));
        
        filteredLanguages = new CaseInsensitiveFilterList(languages);
        <font color="#FF3333">customFilteredLanguages = new ProgrammingLanguageFilter(filteredLanguages);</font>
    }
    
    public void display() {
        ...
        frame.getContentPane().add(customFilteredLanguages.getObjectOrientedCheckBox(), new GridBagConstraints(...));
        frame.getContentPane().add(customFilteredLanguages.getVirtualMachineCheckBox(), new GridBagConstraints(...));
        ...
    }
</code></pre></td></tr></table>

<p><img src="screenshot.gif" width="431" height="235" alt="Programming Languages Screen Shot">

<p>As the user checks and unchecks the checkboxes, programming languages are displayed
or hidden. Custom filters can be very powerful and could be used to limit items by
date, magnitude, owner or even a regular expression.

<br><br><p><table cellpadding="0" cellspacing="0" width="100%" border="0"><tr>
<th align="left" width="30%"><a href="../part2/index.html">&lt;&lt; Part 2 - Text Filtering</a></th> 
<th align="center" width="40%"><a href="../index.html">Tutorial Home</a></th>
<th align="right" width="30%"><a href="../part4/index.html">Part 4 - Sorting &gt;&gt;</a></th>

</body>
</html>